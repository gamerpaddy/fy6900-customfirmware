; PlatformIO Project Configuration File for FY6900 Firmware
; STM32F103CB with SWD upload and COM14 UART debug

[env:genericSTM32F103CB]
platform = ststm32
board = genericSTM32F103CB
framework = arduino

; Upload configuration - SWD protocol
upload_protocol = stlink
debug_tool = stlink

; Serial monitor configuration - COM14 for debug UART
monitor_port = COM14
monitor_speed = 9600
monitor_filters = 
    colorize
    time

; Build flags for STM32F103CB
build_flags =
    -Og 
    -g3
; Library dependencies
lib_deps = 
    adafruit/Adafruit Keypad@^1.2.4
    bodmer/TFT_eSPI@^2.5.43
    madleech/Button@^1.0.0

; Additional build options
board_build.core = stm32
board_build.variant = STM32F1xx/F103C8T_F103CB(T-U)
board_build.ldscript = ldscript.ld

; Debug configuration
debug_init_break = tbreak setup
debug_load_mode = manual

; Upload settings
upload_flags = 
    -c
    set CPUTAPID 0x1ba01477

; Board specific settings
board_build.mcu = stm32f103cbt6
board_build.f_cpu = 72000000L
board_upload.maximum_size = 65536
board_upload.maximum_ram_size = 20480

